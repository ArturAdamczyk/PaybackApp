def getLocalProperty(propertyName){
    def properties = new Properties()
    properties
            .load(project.rootProject.file('local.properties')
                    .newDataInputStream())
    return properties.getProperty(propertyName)
}

def getDefaultProperty(propertyName){
    def properties = new Properties()
    properties
            .load(project.rootProject.file('gradle.properties')
                    .newDataInputStream())
    return properties.getProperty(propertyName)
}

def apiKeyValue(apiKeyName){
    def localApiKey = getLocalProperty(apiKeyName)
    def defaultApiKey = getDefaultProperty(apiKeyName)

    if(localApiKey == null){
        logger.error("Set proper API key for debug build")
        return defaultApiKey
    }

    return localApiKey
}

ext {
    apiKeyValue = this.&apiKeyValue
}